
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="All-in-one productivity backend API">
      
      
      
        <link rel="canonical" href="https://onprem-hipster-timer.github.io/backend/en/development/rate-limit/">
      
      
        <link rel="prev" href="../../deployment/production/">
      
      
        <link rel="next" href="../testing/">
      
      
        
          <link rel="alternate" href="../../../development/rate-limit/" hreflang="ko">
        
          <link rel="alternate" href="./" hreflang="en">
        
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>Rate Limiting - Hipster Timer Backend</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="teal">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#1-rate-limit" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../" title="Hipster Timer Backend" class="md-header__button md-logo" aria-label="Hipster Timer Backend" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Hipster Timer Backend
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Rate Limiting
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="teal"  aria-label="다크 모드로 전환"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="다크 모드로 전환" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="teal" data-md-color-accent="teal"  aria-label="라이트 모드로 전환"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="라이트 모드로 전환" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
      <div class="md-header__option">
  <div class="md-select">
    
    <button class="md-header__button md-icon" aria-label="Select language">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12.87 15.07-2.54-2.51.03-.03A17.5 17.5 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2zm-2.62 7 1.62-4.33L19.12 17z"/></svg>
    </button>
    <div class="md-select__inner">
      <ul class="md-select__list">
        
          <li class="md-select__item">
            <a href="../../../development/rate-limit/" hreflang="ko" class="md-select__link">
              한국어
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="./" hreflang="en" class="md-select__link">
              English
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</div>
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/onprem-hipster-timer/backend" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    backend
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../" class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../getting-started/installation/" class="md-tabs__link">
          
  
  
  Getting Started

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../api/overview/" class="md-tabs__link">
          
  
  
  API Reference

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../guides/auth/" class="md-tabs__link">
          
  
  
  Guides

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../deployment/docker/" class="md-tabs__link">
          
  
  
  Deployment

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="./" class="md-tabs__link">
          
  
  
  Development

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../" title="Hipster Timer Backend" class="md-nav__button md-logo" aria-label="Hipster Timer Backend" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Hipster Timer Backend
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/onprem-hipster-timer/backend" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    backend
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Getting Started
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Getting Started
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/installation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Installation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/configuration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Configuration
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    API Reference
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    API Reference
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/rest-api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    REST API
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/graphql/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    GraphQL
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/websocket/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    WebSocket
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Guides
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Guides
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/auth/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Authentication
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/schedule/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Schedule
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/timer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Timer
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/todo/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Todo
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/friend/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Friend
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/visibility/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Visibility
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/meeting/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Meeting
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Deployment
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Deployment
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../deployment/docker/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Docker
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../deployment/production/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Production
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" checked>
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Development
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    Development
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Rate Limiting
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Rate Limiting
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-rate-limit" class="md-nav__link">
    <span class="md-ellipsis">
      
        1. Rate Limit 개요
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1. Rate Limit 개요">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        동작 방식
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      
        핵심 개념
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      
        사용자 식별
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2" class="md-nav__link">
    <span class="md-ellipsis">
      
        2. 환경변수 설정
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. 환경변수 설정">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      
        환경변수 목록
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#env" class="md-nav__link">
    <span class="md-ellipsis">
      
        예시 설정 (.env)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#docker-compose" class="md-nav__link">
    <span class="md-ellipsis">
      
        Docker Compose 설정
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3" class="md-nav__link">
    <span class="md-ellipsis">
      
        3. 활성화/비활성화
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3. 활성화/비활성화">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#rate-limit" class="md-nav__link">
    <span class="md-ellipsis">
      
        Rate Limit 비활성화
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Rate Limit 비활성화">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1" class="md-nav__link">
    <span class="md-ellipsis">
      
        방법 1: 환경변수 설정
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        방법 2: 환경변수 직접 지정
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      
        비활성화 시 동작
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4" class="md-nav__link">
    <span class="md-ellipsis">
      
        4. 프록시 환경 설정
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4. 프록시 환경 설정">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      
        보안 경고
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cloudflare" class="md-nav__link">
    <span class="md-ellipsis">
      
        Cloudflare 환경 (권장)
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Cloudflare 환경 (권장)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ip" class="md-nav__link">
    <span class="md-ellipsis">
      
        IP 목록 캐시
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fetch" class="md-nav__link">
    <span class="md-ellipsis">
      
        Fetch 실패 시 동작
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nginx" class="md-nav__link">
    <span class="md-ellipsis">
      
        Nginx/기타 프록시 환경
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Nginx/기타 프록시 환경">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      
        지원 형식
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    <span class="md-ellipsis">
      
        직접 연결 (개발 환경)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    <span class="md-ellipsis">
      
        설정 매트릭스
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#docker-compose_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Docker Compose 설정 예시
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5" class="md-nav__link">
    <span class="md-ellipsis">
      
        5. 엔드포인트별 규칙
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="5. 엔드포인트별 규칙">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    <span class="md-ellipsis">
      
        기본 규칙
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    <span class="md-ellipsis">
      
        규칙 적용 우선순위
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#post-v1todos" class="md-nav__link">
    <span class="md-ellipsis">
      
        예시: POST /v1/todos
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#get-v1todos" class="md-nav__link">
    <span class="md-ellipsis">
      
        예시: GET /v1/todos
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6" class="md-nav__link">
    <span class="md-ellipsis">
      
        6. 응답 헤더
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="6. 응답 헤더">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    <span class="md-ellipsis">
      
        헤더 목록
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    <span class="md-ellipsis">
      
        응답 예시
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#429" class="md-nav__link">
    <span class="md-ellipsis">
      
        429 응답 시 추가 헤더
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#7-429" class="md-nav__link">
    <span class="md-ellipsis">
      
        7. 429 에러 처리
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="7. 429 에러 처리">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_14" class="md-nav__link">
    <span class="md-ellipsis">
      
        프론트엔드 처리 방법
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="프론트엔드 처리 방법">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#javascript-fetch" class="md-nav__link">
    <span class="md-ellipsis">
      
        JavaScript (fetch)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#axios" class="md-nav__link">
    <span class="md-ellipsis">
      
        Axios 인터셉터
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_15" class="md-nav__link">
    <span class="md-ellipsis">
      
        권장 클라이언트 동작
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#8" class="md-nav__link">
    <span class="md-ellipsis">
      
        8. 규칙 커스터마이징
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="8. 규칙 커스터마이징">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_16" class="md-nav__link">
    <span class="md-ellipsis">
      
        규칙 수정 위치
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_17" class="md-nav__link">
    <span class="md-ellipsis">
      
        규칙 추가 예시
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_18" class="md-nav__link">
    <span class="md-ellipsis">
      
        규칙 구조
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#path-pattern" class="md-nav__link">
    <span class="md-ellipsis">
      
        Path Pattern 문법
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#9-websocket-rate-limit" class="md-nav__link">
    <span class="md-ellipsis">
      
        9. WebSocket Rate Limit
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="9. WebSocket Rate Limit">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_19" class="md-nav__link">
    <span class="md-ellipsis">
      
        동작 방식
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_20" class="md-nav__link">
    <span class="md-ellipsis">
      
        환경변수 설정
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#env_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        예시 설정 (.env)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_21" class="md-nav__link">
    <span class="md-ellipsis">
      
        두 가지 제한 유형
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="두 가지 제한 유형">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-connection-rate-limit" class="md-nav__link">
    <span class="md-ellipsis">
      
        1. 연결 제한 (Connection Rate Limit)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-message-rate-limit" class="md-nav__link">
    <span class="md-ellipsis">
      
        2. 메시지 제한 (Message Rate Limit)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_22" class="md-nav__link">
    <span class="md-ellipsis">
      
        프론트엔드 처리
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_23" class="md-nav__link">
    <span class="md-ellipsis">
      
        권장 클라이언트 동작
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_24" class="md-nav__link">
    <span class="md-ellipsis">
      
        비활성화
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_25" class="md-nav__link">
    <span class="md-ellipsis">
      
        관련 코드 참조
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#faq" class="md-nav__link">
    <span class="md-ellipsis">
      
        FAQ
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="FAQ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#q-rate-limit" class="md-nav__link">
    <span class="md-ellipsis">
      
        Q: Rate Limit을 테스트하고 싶어요
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#q-ip" class="md-nav__link">
    <span class="md-ellipsis">
      
        Q: 특정 IP나 사용자를 화이트리스트에 추가하고 싶어요
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#q-redis" class="md-nav__link">
    <span class="md-ellipsis">
      
        Q: Redis를 사용하고 싶어요
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#q-graphql-rate-limit" class="md-nav__link">
    <span class="md-ellipsis">
      
        Q: GraphQL 요청도 Rate Limit이 적용되나요?
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#q" class="md-nav__link">
    <span class="md-ellipsis">
      
        Q: 분산 환경에서는 어떻게 되나요?
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../testing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Testing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../python-version-testing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Python Version Testing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../docs-guide/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Docs Guide
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-rate-limit" class="md-nav__link">
    <span class="md-ellipsis">
      
        1. Rate Limit 개요
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1. Rate Limit 개요">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        동작 방식
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      
        핵심 개념
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      
        사용자 식별
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2" class="md-nav__link">
    <span class="md-ellipsis">
      
        2. 환경변수 설정
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. 환경변수 설정">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      
        환경변수 목록
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#env" class="md-nav__link">
    <span class="md-ellipsis">
      
        예시 설정 (.env)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#docker-compose" class="md-nav__link">
    <span class="md-ellipsis">
      
        Docker Compose 설정
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3" class="md-nav__link">
    <span class="md-ellipsis">
      
        3. 활성화/비활성화
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3. 활성화/비활성화">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#rate-limit" class="md-nav__link">
    <span class="md-ellipsis">
      
        Rate Limit 비활성화
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Rate Limit 비활성화">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1" class="md-nav__link">
    <span class="md-ellipsis">
      
        방법 1: 환경변수 설정
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        방법 2: 환경변수 직접 지정
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      
        비활성화 시 동작
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4" class="md-nav__link">
    <span class="md-ellipsis">
      
        4. 프록시 환경 설정
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4. 프록시 환경 설정">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      
        보안 경고
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cloudflare" class="md-nav__link">
    <span class="md-ellipsis">
      
        Cloudflare 환경 (권장)
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Cloudflare 환경 (권장)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ip" class="md-nav__link">
    <span class="md-ellipsis">
      
        IP 목록 캐시
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fetch" class="md-nav__link">
    <span class="md-ellipsis">
      
        Fetch 실패 시 동작
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nginx" class="md-nav__link">
    <span class="md-ellipsis">
      
        Nginx/기타 프록시 환경
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Nginx/기타 프록시 환경">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      
        지원 형식
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    <span class="md-ellipsis">
      
        직접 연결 (개발 환경)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    <span class="md-ellipsis">
      
        설정 매트릭스
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#docker-compose_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Docker Compose 설정 예시
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5" class="md-nav__link">
    <span class="md-ellipsis">
      
        5. 엔드포인트별 규칙
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="5. 엔드포인트별 규칙">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    <span class="md-ellipsis">
      
        기본 규칙
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    <span class="md-ellipsis">
      
        규칙 적용 우선순위
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#post-v1todos" class="md-nav__link">
    <span class="md-ellipsis">
      
        예시: POST /v1/todos
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#get-v1todos" class="md-nav__link">
    <span class="md-ellipsis">
      
        예시: GET /v1/todos
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6" class="md-nav__link">
    <span class="md-ellipsis">
      
        6. 응답 헤더
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="6. 응답 헤더">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    <span class="md-ellipsis">
      
        헤더 목록
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    <span class="md-ellipsis">
      
        응답 예시
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#429" class="md-nav__link">
    <span class="md-ellipsis">
      
        429 응답 시 추가 헤더
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#7-429" class="md-nav__link">
    <span class="md-ellipsis">
      
        7. 429 에러 처리
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="7. 429 에러 처리">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_14" class="md-nav__link">
    <span class="md-ellipsis">
      
        프론트엔드 처리 방법
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="프론트엔드 처리 방법">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#javascript-fetch" class="md-nav__link">
    <span class="md-ellipsis">
      
        JavaScript (fetch)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#axios" class="md-nav__link">
    <span class="md-ellipsis">
      
        Axios 인터셉터
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_15" class="md-nav__link">
    <span class="md-ellipsis">
      
        권장 클라이언트 동작
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#8" class="md-nav__link">
    <span class="md-ellipsis">
      
        8. 규칙 커스터마이징
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="8. 규칙 커스터마이징">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_16" class="md-nav__link">
    <span class="md-ellipsis">
      
        규칙 수정 위치
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_17" class="md-nav__link">
    <span class="md-ellipsis">
      
        규칙 추가 예시
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_18" class="md-nav__link">
    <span class="md-ellipsis">
      
        규칙 구조
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#path-pattern" class="md-nav__link">
    <span class="md-ellipsis">
      
        Path Pattern 문법
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#9-websocket-rate-limit" class="md-nav__link">
    <span class="md-ellipsis">
      
        9. WebSocket Rate Limit
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="9. WebSocket Rate Limit">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_19" class="md-nav__link">
    <span class="md-ellipsis">
      
        동작 방식
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_20" class="md-nav__link">
    <span class="md-ellipsis">
      
        환경변수 설정
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#env_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        예시 설정 (.env)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_21" class="md-nav__link">
    <span class="md-ellipsis">
      
        두 가지 제한 유형
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="두 가지 제한 유형">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-connection-rate-limit" class="md-nav__link">
    <span class="md-ellipsis">
      
        1. 연결 제한 (Connection Rate Limit)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-message-rate-limit" class="md-nav__link">
    <span class="md-ellipsis">
      
        2. 메시지 제한 (Message Rate Limit)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_22" class="md-nav__link">
    <span class="md-ellipsis">
      
        프론트엔드 처리
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_23" class="md-nav__link">
    <span class="md-ellipsis">
      
        권장 클라이언트 동작
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_24" class="md-nav__link">
    <span class="md-ellipsis">
      
        비활성화
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_25" class="md-nav__link">
    <span class="md-ellipsis">
      
        관련 코드 참조
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#faq" class="md-nav__link">
    <span class="md-ellipsis">
      
        FAQ
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="FAQ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#q-rate-limit" class="md-nav__link">
    <span class="md-ellipsis">
      
        Q: Rate Limit을 테스트하고 싶어요
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#q-ip" class="md-nav__link">
    <span class="md-ellipsis">
      
        Q: 특정 IP나 사용자를 화이트리스트에 추가하고 싶어요
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#q-redis" class="md-nav__link">
    <span class="md-ellipsis">
      
        Q: Redis를 사용하고 싶어요
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#q-graphql-rate-limit" class="md-nav__link">
    <span class="md-ellipsis">
      
        Q: GraphQL 요청도 Rate Limit이 적용되나요?
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#q" class="md-nav__link">
    <span class="md-ellipsis">
      
        Q: 분산 환경에서는 어떻게 되나요?
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


  <h1>Rate Limiting</h1>

<div class="highlight"><pre><span></span><code># Rate Limit 가이드
</code></pre></div>
<p>이 문서는 백엔드 API의 Rate Limit(요청 제한) 시스템에 대한 가이드입니다.</p>
<h2 id="1-rate-limit">1. Rate Limit 개요<a class="headerlink" href="#1-rate-limit" title="Permanent link">&para;</a></h2>
<p>Rate Limit은 API 남용을 방지하고 서버 안정성을 보장하기 위한 요청 제한 시스템입니다.</p>
<h3 id="_1">동작 방식<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h3>
<pre class="mermaid"><code>sequenceDiagram
    participant Client
    participant Middleware as RateLimitMiddleware
    participant Storage as InMemoryStorage
    participant API as API Endpoint

    Client-&gt;&gt;Middleware: API 요청
    Middleware-&gt;&gt;Middleware: 규칙 매칭 (method + path)
    Middleware-&gt;&gt;Storage: 요청 카운트 조회
    alt 한도 초과
        Storage--&gt;&gt;Middleware: 초과 상태
        Middleware--&gt;&gt;Client: 429 Too Many Requests
    else 한도 이내
        Storage--&gt;&gt;Middleware: 허용 상태
        Middleware-&gt;&gt;API: 요청 전달
        API--&gt;&gt;Middleware: 응답
        Middleware--&gt;&gt;Client: 응답 + X-RateLimit-* 헤더
    end</code></pre>
<h3 id="_2">핵심 개념<a class="headerlink" href="#_2" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>용어</th>
<th>설명</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Window</strong></td>
<td>요청 카운트를 측정하는 시간 윈도우 (기본 60초)</td>
</tr>
<tr>
<td><strong>Max Requests</strong></td>
<td>윈도우 내 허용되는 최대 요청 수</td>
</tr>
<tr>
<td><strong>User Identifier</strong></td>
<td>사용자 식별 방법 (JWT sub 또는 IP 주소)</td>
</tr>
<tr>
<td><strong>Sliding Window</strong></td>
<td>슬라이딩 윈도우 방식으로 정확한 요청 제한</td>
</tr>
</tbody>
</table>
<h3 id="_3">사용자 식별<a class="headerlink" href="#_3" title="Permanent link">&para;</a></h3>
<p>Rate Limit은 사용자별로 독립적으로 적용됩니다:</p>
<table>
<thead>
<tr>
<th>인증 상태</th>
<th>식별자</th>
</tr>
</thead>
<tbody>
<tr>
<td>인증됨</td>
<td>JWT의 <code>sub</code> claim (OIDC 사용자 ID)</td>
</tr>
<tr>
<td>미인증</td>
<td>클라이언트 IP 주소 (<code>X-Forwarded-For</code> 또는 직접 연결 IP)</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="2">2. 환경변수 설정<a class="headerlink" href="#2" title="Permanent link">&para;</a></h2>
<h3 id="_4">환경변수 목록<a class="headerlink" href="#_4" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>환경변수</th>
<th>필수</th>
<th>기본값</th>
<th>설명</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>RATE_LIMIT_ENABLED</code></td>
<td>X</td>
<td><code>true</code></td>
<td>Rate Limit 활성화 여부</td>
</tr>
<tr>
<td><code>RATE_LIMIT_DEFAULT_WINDOW</code></td>
<td>X</td>
<td><code>60</code></td>
<td>기본 윈도우 크기 (초)</td>
</tr>
<tr>
<td><code>RATE_LIMIT_DEFAULT_REQUESTS</code></td>
<td>X</td>
<td><code>60</code></td>
<td>기본 최대 요청 수</td>
</tr>
<tr>
<td><code>CF_ENABLED</code></td>
<td>X</td>
<td><code>false</code></td>
<td>Cloudflare 프록시 사용 여부</td>
</tr>
<tr>
<td><code>CF_IP_CACHE_TTL</code></td>
<td>X</td>
<td><code>86400</code></td>
<td>Cloudflare IP 목록 캐시 TTL (초, 기본 24시간)</td>
</tr>
<tr>
<td><code>TRUSTED_PROXY_IPS</code></td>
<td>X</td>
<td><code>""</code></td>
<td>신뢰할 프록시 IP 목록 (콤마 구분, CIDR 지원)</td>
</tr>
</tbody>
</table>
<h3 id="env">예시 설정 (.env)<a class="headerlink" href="#env" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="c1"># Rate Limit 설정</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="nv">RATE_LIMIT_ENABLED</span><span class="o">=</span><span class="nb">true</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="nv">RATE_LIMIT_DEFAULT_WINDOW</span><span class="o">=</span><span class="m">60</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="nv">RATE_LIMIT_DEFAULT_REQUESTS</span><span class="o">=</span><span class="m">60</span>
</code></pre></div>
<h3 id="docker-compose">Docker Compose 설정<a class="headerlink" href="#docker-compose" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="c1"># compose.yaml</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="nt">services</span><span class="p">:</span>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="w">  </span><span class="nt">backend</span><span class="p">:</span>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="w">    </span><span class="nt">environment</span><span class="p">:</span>
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">RATE_LIMIT_ENABLED=true</span>
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">RATE_LIMIT_DEFAULT_WINDOW=60</span>
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">RATE_LIMIT_DEFAULT_REQUESTS=60</span>
</code></pre></div>
<hr />
<h2 id="3">3. 활성화/비활성화<a class="headerlink" href="#3" title="Permanent link">&para;</a></h2>
<h3 id="rate-limit">Rate Limit 비활성화<a class="headerlink" href="#rate-limit" title="Permanent link">&para;</a></h3>
<p>개발 환경이나 테스트 시 Rate Limit을 비활성화할 수 있습니다.</p>
<h4 id="1">방법 1: 환경변수 설정<a class="headerlink" href="#1" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="c1"># .env 파일</span>
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="nv">RATE_LIMIT_ENABLED</span><span class="o">=</span><span class="nb">false</span>
</code></pre></div>
<h4 id="2_1">방법 2: 환경변수 직접 지정<a class="headerlink" href="#2_1" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="c1"># Linux/Mac</span>
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="nv">RATE_LIMIT_ENABLED</span><span class="o">=</span><span class="nb">false</span><span class="w"> </span>uvicorn<span class="w"> </span>app.main:app<span class="w"> </span>--reload
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a>
<a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a><span class="c1"># Windows (PowerShell)</span>
<a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a><span class="nv">$env</span>:RATE_LIMIT_ENABLED<span class="o">=</span><span class="s2">&quot;false&quot;</span><span class="p">;</span><span class="w"> </span>uvicorn<span class="w"> </span>app.main:app<span class="w"> </span>--reload
</code></pre></div>
<h3 id="_5">비활성화 시 동작<a class="headerlink" href="#_5" title="Permanent link">&para;</a></h3>
<ul>
<li>모든 요청이 제한 없이 통과됩니다</li>
<li>X-RateLimit-* 응답 헤더가 추가되지 않습니다</li>
<li>로그에 Rate Limit 관련 메시지가 출력되지 않습니다</li>
</ul>
<blockquote>
<p><strong>주의</strong>: 프로덕션 환경에서는 반드시 <code>RATE_LIMIT_ENABLED=true</code>로 설정하세요!</p>
</blockquote>
<hr />
<h2 id="4">4. 프록시 환경 설정<a class="headerlink" href="#4" title="Permanent link">&para;</a></h2>
<p>프록시(Cloudflare, Nginx, 로드밸런서 등) 뒤에서 운영할 때 클라이언트 IP를 정확히 식별하기 위한 설정입니다.</p>
<h3 id="_6">보안 경고<a class="headerlink" href="#_6" title="Permanent link">&para;</a></h3>
<blockquote>
<p><strong>⚠️ 중요</strong>: 프록시 헤더(<code>X-Forwarded-For</code>, <code>CF-Connecting-IP</code>)는 클라이언트가 조작할 수 있습니다.<br />
반드시 신뢰할 수 있는 프록시에서 온 요청에서만 이 헤더를 사용해야 합니다.</p>
</blockquote>
<h3 id="cloudflare">Cloudflare 환경 (권장)<a class="headerlink" href="#cloudflare" title="Permanent link">&para;</a></h3>
<p>Cloudflare를 사용하는 경우 <code>CF_ENABLED=true</code>로 설정하세요:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="c1"># .env</span>
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="nv">CF_ENABLED</span><span class="o">=</span><span class="nb">true</span>
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a><span class="nv">CF_IP_CACHE_TTL</span><span class="o">=</span><span class="m">86400</span><span class="w">  </span><span class="c1"># 24시간 (cf 권장)</span>
</code></pre></div>
<h4 id="ip">IP 목록 캐시<a class="headerlink" href="#ip" title="Permanent link">&para;</a></h4>
<ul>
<li>Cloudflare IP 목록은 거의 변경되지 않습니다 (보통 몇 달에 1번)</li>
<li>기본 캐시 TTL: 24시간 (<code>CF_IP_CACHE_TTL=86400</code>)</li>
<li>앱 재시작 또는 TTL 만료 시 백그라운드에서 자동 갱신</li>
</ul>
<h4 id="fetch">Fetch 실패 시 동작<a class="headerlink" href="#fetch" title="Permanent link">&para;</a></h4>
<ol>
<li><strong>이전 캐시 있음</strong>: 이전 캐시 계속 사용</li>
<li><strong>캐시 없음</strong>: Fail-Safe 모드 - 프록시 헤더 무시, <code>request.client.host</code> 직접 사용</li>
</ol>
<h3 id="nginx">Nginx/기타 프록시 환경<a class="headerlink" href="#nginx" title="Permanent link">&para;</a></h3>
<p>Cloudflare가 아닌 다른 프록시를 사용하는 경우 <code>TRUSTED_PROXY_IPS</code>를 설정하세요:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="c1"># .env</span>
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="nv">CF_ENABLED</span><span class="o">=</span><span class="nb">false</span><span class="w">  </span><span class="c1"># 기본값</span>
<a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a><span class="nv">TRUSTED_PROXY_IPS</span><span class="o">=</span><span class="m">127</span>.0.0.1,10.0.0.0/8,172.16.0.0/12,192.168.0.0/16
</code></pre></div>
<h4 id="_7">지원 형식<a class="headerlink" href="#_7" title="Permanent link">&para;</a></h4>
<ul>
<li>단일 IP: <code>127.0.0.1</code></li>
<li>CIDR 범위: <code>10.0.0.0/8</code></li>
<li>콤마로 구분: <code>127.0.0.1,10.0.0.0/8</code>\</li>
</ul>
<h3 id="_8">직접 연결 (개발 환경)<a class="headerlink" href="#_8" title="Permanent link">&para;</a></h3>
<p>프록시 없이 직접 연결하는 경우 아무 설정도 필요 없습니다:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="c1"># .env</span>
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="nv">CF_ENABLED</span><span class="o">=</span><span class="nb">false</span><span class="w">       </span><span class="c1"># 기본값</span>
<a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a><span class="nv">TRUSTED_PROXY_IPS</span><span class="o">=</span><span class="w">     </span><span class="c1"># 기본값 (빈 문자열)</span>
</code></pre></div>
<p>모든 프록시 헤더를 무시하고 <code>request.client.host</code>를 직접 사용합니다.</p>
<h3 id="_9">설정 매트릭스<a class="headerlink" href="#_9" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>CF_ENABLED</th>
<th>TRUSTED_PROXY_IPS</th>
<th>요청 출처</th>
<th>IP 추출 방식</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>true</code></td>
<td>(무시됨)</td>
<td>Cloudflare IP</td>
<td><code>CF-Connecting-IP</code> 헤더</td>
</tr>
<tr>
<td><code>true</code></td>
<td>(무시됨)</td>
<td>다른 IP</td>
<td><code>request.client.host</code></td>
</tr>
<tr>
<td><code>false</code></td>
<td>설정됨</td>
<td>Trusted IP</td>
<td><code>X-Forwarded-For</code> 헤더</td>
</tr>
<tr>
<td><code>false</code></td>
<td>설정됨</td>
<td>다른 IP</td>
<td><code>request.client.host</code></td>
</tr>
<tr>
<td><code>false</code></td>
<td>비어있음</td>
<td>어디든</td>
<td><code>request.client.host</code></td>
</tr>
</tbody>
</table>
<h3 id="docker-compose_1">Docker Compose 설정 예시<a class="headerlink" href="#docker-compose_1" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="c1"># compose.yaml</span>
<a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="nt">services</span><span class="p">:</span>
<a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a><span class="w">  </span><span class="nt">backend</span><span class="p">:</span>
<a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a><span class="w">    </span><span class="nt">environment</span><span class="p">:</span>
<a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a><span class="w">      </span><span class="c1"># Cloudflare 환경</span>
<a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">CF_ENABLED=true</span>
<a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a>
<a id="__codelineno-7-8" name="__codelineno-7-8" href="#__codelineno-7-8"></a><span class="w">      </span><span class="c1"># 또는 Nginx 프록시 환경</span>
<a id="__codelineno-7-9" name="__codelineno-7-9" href="#__codelineno-7-9"></a><span class="w">      </span><span class="c1"># - CF_ENABLED=false</span>
<a id="__codelineno-7-10" name="__codelineno-7-10" href="#__codelineno-7-10"></a><span class="w">      </span><span class="c1"># - TRUSTED_PROXY_IPS=nginx,10.0.0.0/8</span>
</code></pre></div>
<hr />
<h2 id="5">5. 엔드포인트별 규칙<a class="headerlink" href="#5" title="Permanent link">&para;</a></h2>
<p>Rate Limit 규칙은 엔드포인트와 HTTP 메서드에 따라 다르게 적용됩니다.</p>
<h3 id="_10">기본 규칙<a class="headerlink" href="#_10" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>엔드포인트 패턴</th>
<th>메서드</th>
<th>Window</th>
<th>Max Requests</th>
<th>설명</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>/v1/todos</code></td>
<td>POST</td>
<td>60초</td>
<td>30</td>
<td>Todo 생성 제한</td>
</tr>
<tr>
<td><code>/v1/schedules</code></td>
<td>POST</td>
<td>60초</td>
<td>30</td>
<td>Schedule 생성 제한</td>
</tr>
<tr>
<td><code>/v1/timers</code></td>
<td>POST</td>
<td>60초</td>
<td>30</td>
<td>Timer 생성 제한</td>
</tr>
<tr>
<td><code>/v1/tags</code></td>
<td>POST</td>
<td>60초</td>
<td>30</td>
<td>Tag 생성 제한</td>
</tr>
<tr>
<td><code>/v1/tags/groups</code></td>
<td>POST</td>
<td>60초</td>
<td>30</td>
<td>TagGroup 생성 제한</td>
</tr>
<tr>
<td><code>/v1/todos/*</code></td>
<td>ALL</td>
<td>60초</td>
<td>100</td>
<td>Todo 일반 작업</td>
</tr>
<tr>
<td><code>/v1/schedules/*</code></td>
<td>ALL</td>
<td>60초</td>
<td>60</td>
<td>Schedule 일반 작업</td>
</tr>
<tr>
<td><code>/v1/timers/*</code></td>
<td>ALL</td>
<td>60초</td>
<td>60</td>
<td>Timer 일반 작업</td>
</tr>
<tr>
<td><code>/v1/tags/*</code></td>
<td>ALL</td>
<td>60초</td>
<td>60</td>
<td>Tag 일반 작업</td>
</tr>
<tr>
<td><code>/v1/graphql</code></td>
<td>ALL</td>
<td>60초</td>
<td>60</td>
<td>GraphQL 요청</td>
</tr>
<tr>
<td><code>/v1/*</code></td>
<td>ALL</td>
<td>60초</td>
<td>60</td>
<td>기타 API (폴백)</td>
</tr>
</tbody>
</table>
<h3 id="_11">규칙 적용 우선순위<a class="headerlink" href="#_11" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>구체적인 규칙 우선</strong>: 더 구체적인 경로/메서드 규칙이 먼저 적용됩니다</li>
<li><strong>첫 번째 매칭 사용</strong>: 규칙 리스트를 순회하며 첫 번째 매칭 규칙 사용</li>
<li><strong>폴백 규칙</strong>: 매칭되는 규칙이 없으면 <code>/v1/*</code> 전역 규칙 적용</li>
</ol>
<h3 id="post-v1todos">예시: POST /v1/todos<a class="headerlink" href="#post-v1todos" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a>요청: POST /v1/todos
<a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a>→ 규칙 매칭: RateLimitRule(methods=[&quot;POST&quot;], path_pattern=&quot;/v1/todos&quot;, ...)
<a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a>→ 적용: 60초당 30회 제한
</code></pre></div>
<h3 id="get-v1todos">예시: GET /v1/todos<a class="headerlink" href="#get-v1todos" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a>요청: GET /v1/todos
<a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a>→ POST 전용 규칙 스킵
<a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a>→ 규칙 매칭: RateLimitRule(path_pattern=&quot;/v1/todos&quot;, ...)
<a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a>→ 적용: 60초당 100회 제한
</code></pre></div>
<hr />
<h2 id="6">6. 응답 헤더<a class="headerlink" href="#6" title="Permanent link">&para;</a></h2>
<p>모든 <code>/v1/*</code> API 응답에 Rate Limit 정보 헤더가 포함됩니다.</p>
<h3 id="_12">헤더 목록<a class="headerlink" href="#_12" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>헤더</th>
<th>설명</th>
<th>예시</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>X-RateLimit-Limit</code></td>
<td>윈도우 내 최대 허용 요청 수</td>
<td><code>60</code></td>
</tr>
<tr>
<td><code>X-RateLimit-Remaining</code></td>
<td>남은 요청 수</td>
<td><code>42</code></td>
</tr>
<tr>
<td><code>X-RateLimit-Reset</code></td>
<td>윈도우 리셋까지 남은 시간 (초)</td>
<td><code>35</code></td>
</tr>
</tbody>
</table>
<h3 id="_13">응답 예시<a class="headerlink" href="#_13" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a><span class="na">X-RateLimit-Limit</span><span class="o">:</span> <span class="l">60</span>
<a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a><span class="na">X-RateLimit-Remaining</span><span class="o">:</span> <span class="l">42</span>
<a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a><span class="na">X-RateLimit-Reset</span><span class="o">:</span> <span class="l">35</span>
<a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a><span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>
<a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a>
<a id="__codelineno-10-7" name="__codelineno-10-7" href="#__codelineno-10-7"></a><span class="p">{</span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;...&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;My Schedule&quot;</span><span class="p">}</span>
</code></pre></div>
<h3 id="429">429 응답 시 추가 헤더<a class="headerlink" href="#429" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">429</span> <span class="ne">Too Many Requests</span>
<a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a><span class="na">Retry-After</span><span class="o">:</span> <span class="l">35</span>
<a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a><span class="na">X-RateLimit-Limit</span><span class="o">:</span> <span class="l">60</span>
<a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a><span class="na">X-RateLimit-Remaining</span><span class="o">:</span> <span class="l">0</span>
<a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a><span class="na">X-RateLimit-Reset</span><span class="o">:</span> <span class="l">35</span>
<a id="__codelineno-11-6" name="__codelineno-11-6" href="#__codelineno-11-6"></a><span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>
<a id="__codelineno-11-7" name="__codelineno-11-7" href="#__codelineno-11-7"></a>
<a id="__codelineno-11-8" name="__codelineno-11-8" href="#__codelineno-11-8"></a><span class="p">{</span>
<a id="__codelineno-11-9" name="__codelineno-11-9" href="#__codelineno-11-9"></a><span class="w">  </span><span class="nt">&quot;detail&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;요청 한도를 초과했습니다. 잠시 후 다시 시도해주세요.&quot;</span><span class="p">,</span>
<a id="__codelineno-11-10" name="__codelineno-11-10" href="#__codelineno-11-10"></a><span class="w">  </span><span class="nt">&quot;retry_after&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">35</span>
<a id="__codelineno-11-11" name="__codelineno-11-11" href="#__codelineno-11-11"></a><span class="p">}</span>
</code></pre></div>
<hr />
<h2 id="7-429">7. 429 에러 처리<a class="headerlink" href="#7-429" title="Permanent link">&para;</a></h2>
<h3 id="_14">프론트엔드 처리 방법<a class="headerlink" href="#_14" title="Permanent link">&para;</a></h3>
<h4 id="javascript-fetch">JavaScript (fetch)<a class="headerlink" href="#javascript-fetch" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="kd">const</span><span class="w"> </span><span class="nx">response</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">fetch</span><span class="p">(</span><span class="s1">&#39;http://localhost:2614/v1/schedules&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a><span class="w">  </span><span class="nx">method</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;POST&#39;</span><span class="p">,</span>
<a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a><span class="w">  </span><span class="nx">headers</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a><span class="w">    </span><span class="s1">&#39;Authorization&#39;</span><span class="o">:</span><span class="w"> </span><span class="sb">`Bearer </span><span class="si">${</span><span class="nx">accessToken</span><span class="si">}</span><span class="sb">`</span><span class="p">,</span>
<a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a><span class="w">    </span><span class="s1">&#39;Content-Type&#39;</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;application/json&#39;</span><span class="p">,</span>
<a id="__codelineno-12-6" name="__codelineno-12-6" href="#__codelineno-12-6"></a><span class="w">  </span><span class="p">},</span>
<a id="__codelineno-12-7" name="__codelineno-12-7" href="#__codelineno-12-7"></a><span class="w">  </span><span class="nx">body</span><span class="o">:</span><span class="w"> </span><span class="nb">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">data</span><span class="p">),</span>
<a id="__codelineno-12-8" name="__codelineno-12-8" href="#__codelineno-12-8"></a><span class="p">});</span>
<a id="__codelineno-12-9" name="__codelineno-12-9" href="#__codelineno-12-9"></a>
<a id="__codelineno-12-10" name="__codelineno-12-10" href="#__codelineno-12-10"></a><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">status</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="mf">429</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-12-11" name="__codelineno-12-11" href="#__codelineno-12-11"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">errorData</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">response</span><span class="p">.</span><span class="nx">json</span><span class="p">();</span>
<a id="__codelineno-12-12" name="__codelineno-12-12" href="#__codelineno-12-12"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">retryAfter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">response</span><span class="p">.</span><span class="nx">headers</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;Retry-After&#39;</span><span class="p">)</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nx">errorData</span><span class="p">.</span><span class="nx">retry_after</span><span class="p">;</span>
<a id="__codelineno-12-13" name="__codelineno-12-13" href="#__codelineno-12-13"></a>
<a id="__codelineno-12-14" name="__codelineno-12-14" href="#__codelineno-12-14"></a><span class="w">  </span><span class="c1">// 사용자에게 알림</span>
<a id="__codelineno-12-15" name="__codelineno-12-15" href="#__codelineno-12-15"></a><span class="w">  </span><span class="nx">showNotification</span><span class="p">(</span><span class="sb">`요청 한도 초과. </span><span class="si">${</span><span class="nx">retryAfter</span><span class="si">}</span><span class="sb">초 후 다시 시도해주세요.`</span><span class="p">);</span>
<a id="__codelineno-12-16" name="__codelineno-12-16" href="#__codelineno-12-16"></a>
<a id="__codelineno-12-17" name="__codelineno-12-17" href="#__codelineno-12-17"></a><span class="w">  </span><span class="c1">// 자동 재시도 (선택적)</span>
<a id="__codelineno-12-18" name="__codelineno-12-18" href="#__codelineno-12-18"></a><span class="w">  </span><span class="nx">setTimeout</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-12-19" name="__codelineno-12-19" href="#__codelineno-12-19"></a><span class="w">    </span><span class="nx">retryRequest</span><span class="p">();</span>
<a id="__codelineno-12-20" name="__codelineno-12-20" href="#__codelineno-12-20"></a><span class="w">  </span><span class="p">},</span><span class="w"> </span><span class="nx">retryAfter</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mf">1000</span><span class="p">);</span>
<a id="__codelineno-12-21" name="__codelineno-12-21" href="#__codelineno-12-21"></a><span class="p">}</span>
</code></pre></div>
<h4 id="axios">Axios 인터셉터<a class="headerlink" href="#axios" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="k">import</span><span class="w"> </span><span class="nx">axios</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;axios&#39;</span><span class="p">;</span>
<a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a>
<a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a><span class="kd">const</span><span class="w"> </span><span class="nx">api</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">axios</span><span class="p">.</span><span class="nx">create</span><span class="p">({</span>
<a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a><span class="w">  </span><span class="nx">baseURL</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;http://localhost:2614/v1&#39;</span><span class="p">,</span>
<a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a><span class="p">});</span>
<a id="__codelineno-13-6" name="__codelineno-13-6" href="#__codelineno-13-6"></a>
<a id="__codelineno-13-7" name="__codelineno-13-7" href="#__codelineno-13-7"></a><span class="c1">// 응답 인터셉터: 429 처리</span>
<a id="__codelineno-13-8" name="__codelineno-13-8" href="#__codelineno-13-8"></a><span class="nx">api</span><span class="p">.</span><span class="nx">interceptors</span><span class="p">.</span><span class="nx">response</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span>
<a id="__codelineno-13-9" name="__codelineno-13-9" href="#__codelineno-13-9"></a><span class="w">  </span><span class="p">(</span><span class="nx">response</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-13-10" name="__codelineno-13-10" href="#__codelineno-13-10"></a><span class="w">    </span><span class="c1">// 남은 요청 수 로깅 (디버깅용)</span>
<a id="__codelineno-13-11" name="__codelineno-13-11" href="#__codelineno-13-11"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">remaining</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">response</span><span class="p">.</span><span class="nx">headers</span><span class="p">[</span><span class="s1">&#39;x-ratelimit-remaining&#39;</span><span class="p">];</span>
<a id="__codelineno-13-12" name="__codelineno-13-12" href="#__codelineno-13-12"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">remaining</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nb">parseInt</span><span class="p">(</span><span class="nx">remaining</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mf">10</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-13-13" name="__codelineno-13-13" href="#__codelineno-13-13"></a><span class="w">      </span><span class="nx">console</span><span class="p">.</span><span class="nx">warn</span><span class="p">(</span><span class="sb">`Rate limit warning: </span><span class="si">${</span><span class="nx">remaining</span><span class="si">}</span><span class="sb"> requests remaining`</span><span class="p">);</span>
<a id="__codelineno-13-14" name="__codelineno-13-14" href="#__codelineno-13-14"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-13-15" name="__codelineno-13-15" href="#__codelineno-13-15"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">response</span><span class="p">;</span>
<a id="__codelineno-13-16" name="__codelineno-13-16" href="#__codelineno-13-16"></a><span class="w">  </span><span class="p">},</span>
<a id="__codelineno-13-17" name="__codelineno-13-17" href="#__codelineno-13-17"></a><span class="w">  </span><span class="k">async</span><span class="w"> </span><span class="p">(</span><span class="nx">error</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-13-18" name="__codelineno-13-18" href="#__codelineno-13-18"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">response</span><span class="o">?</span><span class="p">.</span><span class="nx">status</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="mf">429</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-13-19" name="__codelineno-13-19" href="#__codelineno-13-19"></a><span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">retryAfter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">error</span><span class="p">.</span><span class="nx">response</span><span class="p">.</span><span class="nx">headers</span><span class="p">[</span><span class="s1">&#39;retry-after&#39;</span><span class="p">]</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="mf">60</span><span class="p">;</span>
<a id="__codelineno-13-20" name="__codelineno-13-20" href="#__codelineno-13-20"></a>
<a id="__codelineno-13-21" name="__codelineno-13-21" href="#__codelineno-13-21"></a><span class="w">      </span><span class="c1">// 토스트 알림</span>
<a id="__codelineno-13-22" name="__codelineno-13-22" href="#__codelineno-13-22"></a><span class="w">      </span><span class="nx">showToast</span><span class="p">(</span><span class="sb">`요청 한도 초과. </span><span class="si">${</span><span class="nx">retryAfter</span><span class="si">}</span><span class="sb">초 후 다시 시도해주세요.`</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;warning&#39;</span><span class="p">);</span>
<a id="__codelineno-13-23" name="__codelineno-13-23" href="#__codelineno-13-23"></a>
<a id="__codelineno-13-24" name="__codelineno-13-24" href="#__codelineno-13-24"></a><span class="w">      </span><span class="c1">// 자동 재시도 (지수 백오프)</span>
<a id="__codelineno-13-25" name="__codelineno-13-25" href="#__codelineno-13-25"></a><span class="w">      </span><span class="k">await</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nb">Promise</span><span class="p">(</span><span class="nx">resolve</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">setTimeout</span><span class="p">(</span><span class="nx">resolve</span><span class="p">,</span><span class="w"> </span><span class="nx">retryAfter</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mf">1000</span><span class="p">));</span>
<a id="__codelineno-13-26" name="__codelineno-13-26" href="#__codelineno-13-26"></a><span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="nx">api</span><span class="p">.</span><span class="nx">request</span><span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">config</span><span class="p">);</span>
<a id="__codelineno-13-27" name="__codelineno-13-27" href="#__codelineno-13-27"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-13-28" name="__codelineno-13-28" href="#__codelineno-13-28"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nb">Promise</span><span class="p">.</span><span class="nx">reject</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
<a id="__codelineno-13-29" name="__codelineno-13-29" href="#__codelineno-13-29"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-13-30" name="__codelineno-13-30" href="#__codelineno-13-30"></a><span class="p">);</span>
</code></pre></div>
<h3 id="_15">권장 클라이언트 동작<a class="headerlink" href="#_15" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>Retry-After 헤더 존중</strong>: 서버가 제공하는 대기 시간을 따르세요</li>
<li><strong>지수 백오프</strong>: 연속 429 응답 시 대기 시간을 점진적으로 증가</li>
<li><strong>사용자 피드백</strong>: 명확한 에러 메시지와 남은 시간 표시</li>
<li><strong>요청 배치</strong>: 가능하면 여러 요청을 하나로 묶기 (GraphQL 활용)</li>
</ol>
<hr />
<h2 id="8">8. 규칙 커스터마이징<a class="headerlink" href="#8" title="Permanent link">&para;</a></h2>
<h3 id="_16">규칙 수정 위치<a class="headerlink" href="#_16" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a>app/ratelimit/config.py
</code></pre></div>
<h3 id="_17">규칙 추가 예시<a class="headerlink" href="#_17" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="c1"># app/ratelimit/config.py</span>
<a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a>
<a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a><span class="n">RATE_LIMIT_RULES</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">RateLimitRule</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-15-4" name="__codelineno-15-4" href="#__codelineno-15-4"></a>    <span class="c1"># 새로운 규칙 추가 (기존 규칙보다 위에 배치)</span>
<a id="__codelineno-15-5" name="__codelineno-15-5" href="#__codelineno-15-5"></a>    <span class="n">RateLimitRule</span><span class="p">(</span>
<a id="__codelineno-15-6" name="__codelineno-15-6" href="#__codelineno-15-6"></a>        <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;POST&quot;</span><span class="p">],</span>
<a id="__codelineno-15-7" name="__codelineno-15-7" href="#__codelineno-15-7"></a>        <span class="n">path_pattern</span><span class="o">=</span><span class="s2">&quot;/v1/bulk-import&quot;</span><span class="p">,</span>  <span class="c1"># 대량 가져오기 엔드포인트</span>
<a id="__codelineno-15-8" name="__codelineno-15-8" href="#__codelineno-15-8"></a>        <span class="n">window_seconds</span><span class="o">=</span><span class="mi">3600</span><span class="p">,</span>              <span class="c1"># 1시간</span>
<a id="__codelineno-15-9" name="__codelineno-15-9" href="#__codelineno-15-9"></a>        <span class="n">max_requests</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>                   <span class="c1"># 시간당 5회만 허용</span>
<a id="__codelineno-15-10" name="__codelineno-15-10" href="#__codelineno-15-10"></a>    <span class="p">),</span>
<a id="__codelineno-15-11" name="__codelineno-15-11" href="#__codelineno-15-11"></a>
<a id="__codelineno-15-12" name="__codelineno-15-12" href="#__codelineno-15-12"></a>    <span class="c1"># ... 기존 규칙들 ...</span>
<a id="__codelineno-15-13" name="__codelineno-15-13" href="#__codelineno-15-13"></a><span class="p">]</span>
</code></pre></div>
<h3 id="_18">규칙 구조<a class="headerlink" href="#_18" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a><span class="k">class</span><span class="w"> </span><span class="nc">RateLimitRule</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a>    <span class="n">methods</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># None = 모든 메서드</span>
<a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a>    <span class="n">path_pattern</span><span class="p">:</span> <span class="nb">str</span>                     <span class="c1"># fnmatch 패턴</span>
<a id="__codelineno-16-4" name="__codelineno-16-4" href="#__codelineno-16-4"></a>    <span class="n">window_seconds</span><span class="p">:</span> <span class="nb">int</span>                   <span class="c1"># 윈도우 크기 (초)</span>
<a id="__codelineno-16-5" name="__codelineno-16-5" href="#__codelineno-16-5"></a>    <span class="n">max_requests</span><span class="p">:</span> <span class="nb">int</span>                     <span class="c1"># 최대 요청 수</span>
</code></pre></div>
<h3 id="path-pattern">Path Pattern 문법<a class="headerlink" href="#path-pattern" title="Permanent link">&para;</a></h3>
<p><code>fnmatch</code> 패턴을 사용합니다:</p>
<table>
<thead>
<tr>
<th>패턴</th>
<th>설명</th>
<th>매칭 예시</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>/v1/todos</code></td>
<td>정확히 일치</td>
<td><code>/v1/todos</code></td>
</tr>
<tr>
<td><code>/v1/todos/*</code></td>
<td>하위 경로 포함</td>
<td><code>/v1/todos/123</code>, <code>/v1/todos/123/complete</code></td>
</tr>
<tr>
<td><code>/v1/*/export</code></td>
<td>중간 와일드카드</td>
<td><code>/v1/schedules/export</code>, <code>/v1/todos/export</code></td>
</tr>
</tbody>
</table>
<hr />
<h2 id="9-websocket-rate-limit">9. WebSocket Rate Limit<a class="headerlink" href="#9-websocket-rate-limit" title="Permanent link">&para;</a></h2>
<p>WebSocket 연결에 대한 레이트 리밋은 REST API와 별도로 관리됩니다.</p>
<h3 id="_19">동작 방식<a class="headerlink" href="#_19" title="Permanent link">&para;</a></h3>
<pre class="mermaid"><code>sequenceDiagram
    participant Client
    participant WS as WebSocket Handler
    participant Limiter as WSRateLimiter
    participant Storage as InMemoryStorage

    Note over Client,WS: 연결 시도
    Client-&gt;&gt;WS: WebSocket 연결 요청
    WS-&gt;&gt;Limiter: 연결 Rate Limit 체크
    Limiter-&gt;&gt;Storage: 연결 카운트 조회
    alt 연결 한도 초과
        Storage--&gt;&gt;Limiter: 초과 상태
        Limiter--&gt;&gt;WS: 차단
        WS--&gt;&gt;Client: 연결 거부 (4029)
    else 연결 허용
        Storage--&gt;&gt;Limiter: 허용
        WS--&gt;&gt;Client: 연결 수락

        Note over Client,WS: 메시지 교환
        Client-&gt;&gt;WS: 메시지 전송
        WS-&gt;&gt;Limiter: 메시지 Rate Limit 체크
        alt 메시지 한도 초과
            Limiter--&gt;&gt;WS: 차단
            WS--&gt;&gt;Client: 에러 메시지 (RATE_LIMIT_EXCEEDED)
        else 메시지 허용
            WS-&gt;&gt;WS: 메시지 처리
            WS--&gt;&gt;Client: 응답 메시지
        end
    end</code></pre>
<h3 id="_20">환경변수 설정<a class="headerlink" href="#_20" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>환경변수</th>
<th>기본값</th>
<th>설명</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>WS_RATE_LIMIT_ENABLED</code></td>
<td><code>true</code></td>
<td>WebSocket Rate Limit 활성화</td>
</tr>
<tr>
<td><code>WS_CONNECT_WINDOW</code></td>
<td><code>60</code></td>
<td>연결 제한 윈도우 (초)</td>
</tr>
<tr>
<td><code>WS_CONNECT_MAX</code></td>
<td><code>10</code></td>
<td>윈도우 내 최대 연결 횟수</td>
</tr>
<tr>
<td><code>WS_MESSAGE_WINDOW</code></td>
<td><code>60</code></td>
<td>메시지 제한 윈도우 (초)</td>
</tr>
<tr>
<td><code>WS_MESSAGE_MAX</code></td>
<td><code>120</code></td>
<td>윈도우 내 최대 메시지 수</td>
</tr>
</tbody>
</table>
<h3 id="env_1">예시 설정 (.env)<a class="headerlink" href="#env_1" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a><span class="c1"># WebSocket Rate Limit 설정</span>
<a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a><span class="nv">WS_RATE_LIMIT_ENABLED</span><span class="o">=</span><span class="nb">true</span>
<a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a><span class="nv">WS_CONNECT_WINDOW</span><span class="o">=</span><span class="m">60</span><span class="w">      </span><span class="c1"># 1분</span>
<a id="__codelineno-17-4" name="__codelineno-17-4" href="#__codelineno-17-4"></a><span class="nv">WS_CONNECT_MAX</span><span class="o">=</span><span class="m">10</span><span class="w">         </span><span class="c1"># 분당 10회 연결</span>
<a id="__codelineno-17-5" name="__codelineno-17-5" href="#__codelineno-17-5"></a><span class="nv">WS_MESSAGE_WINDOW</span><span class="o">=</span><span class="m">60</span><span class="w">      </span><span class="c1"># 1분</span>
<a id="__codelineno-17-6" name="__codelineno-17-6" href="#__codelineno-17-6"></a><span class="nv">WS_MESSAGE_MAX</span><span class="o">=</span><span class="m">120</span><span class="w">        </span><span class="c1"># 분당 120개 메시지</span>
</code></pre></div>
<h3 id="_21">두 가지 제한 유형<a class="headerlink" href="#_21" title="Permanent link">&para;</a></h3>
<h4 id="1-connection-rate-limit">1. 연결 제한 (Connection Rate Limit)<a class="headerlink" href="#1-connection-rate-limit" title="Permanent link">&para;</a></h4>
<ul>
<li><strong>목적</strong>: 동일 사용자가 짧은 시간 내에 반복적으로 연결/해제하는 것 방지</li>
<li><strong>적용 시점</strong>: WebSocket 연결 수락 전</li>
<li><strong>초과 시</strong>: 연결 거부 (close code: <code>4029</code>)</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a><span class="c1">// 클라이언트 측 에러 처리</span>
<a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a><span class="nx">ws</span><span class="p">.</span><span class="nx">onclose</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">event</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">code</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="mf">4029</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-18-4" name="__codelineno-18-4" href="#__codelineno-18-4"></a><span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s1">&#39;연결 Rate Limit 초과:&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">event</span><span class="p">.</span><span class="nx">reason</span><span class="p">);</span>
<a id="__codelineno-18-5" name="__codelineno-18-5" href="#__codelineno-18-5"></a><span class="w">    </span><span class="c1">// 재연결 대기</span>
<a id="__codelineno-18-6" name="__codelineno-18-6" href="#__codelineno-18-6"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-18-7" name="__codelineno-18-7" href="#__codelineno-18-7"></a><span class="p">};</span>
</code></pre></div>
<h4 id="2-message-rate-limit">2. 메시지 제한 (Message Rate Limit)<a class="headerlink" href="#2-message-rate-limit" title="Permanent link">&para;</a></h4>
<ul>
<li><strong>목적</strong>: 연결된 사용자의 메시지 폭주 방지</li>
<li><strong>적용 시점</strong>: 각 메시지 수신 시</li>
<li><strong>초과 시</strong>: 에러 메시지 응답 (연결 유지)</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a><span class="p">{</span>
<a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a><span class="w">  </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;error&quot;</span><span class="p">,</span>
<a id="__codelineno-19-3" name="__codelineno-19-3" href="#__codelineno-19-3"></a><span class="w">  </span><span class="nt">&quot;payload&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-19-4" name="__codelineno-19-4" href="#__codelineno-19-4"></a><span class="w">    </span><span class="nt">&quot;code&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;RATE_LIMIT_EXCEEDED&quot;</span><span class="p">,</span>
<a id="__codelineno-19-5" name="__codelineno-19-5" href="#__codelineno-19-5"></a><span class="w">    </span><span class="nt">&quot;message&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;WebSocket 메시지 한도를 초과했습니다. 35초 후에 다시 시도해주세요.&quot;</span>
<a id="__codelineno-19-6" name="__codelineno-19-6" href="#__codelineno-19-6"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-19-7" name="__codelineno-19-7" href="#__codelineno-19-7"></a><span class="p">}</span>
</code></pre></div>
<h3 id="_22">프론트엔드 처리<a class="headerlink" href="#_22" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a><span class="c1">// WebSocket Rate Limit 처리 예시</span>
<a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a><span class="kd">class</span><span class="w"> </span><span class="nx">TimerWebSocket</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-20-3" name="__codelineno-20-3" href="#__codelineno-20-3"></a><span class="w">  </span><span class="kr">constructor</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span><span class="w"> </span><span class="nx">token</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-20-4" name="__codelineno-20-4" href="#__codelineno-20-4"></a><span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">url</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">url</span><span class="p">;</span>
<a id="__codelineno-20-5" name="__codelineno-20-5" href="#__codelineno-20-5"></a><span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">token</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">token</span><span class="p">;</span>
<a id="__codelineno-20-6" name="__codelineno-20-6" href="#__codelineno-20-6"></a><span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">reconnectAttempts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span>
<a id="__codelineno-20-7" name="__codelineno-20-7" href="#__codelineno-20-7"></a><span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">maxReconnectAttempts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">5</span><span class="p">;</span>
<a id="__codelineno-20-8" name="__codelineno-20-8" href="#__codelineno-20-8"></a><span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">connect</span><span class="p">();</span>
<a id="__codelineno-20-9" name="__codelineno-20-9" href="#__codelineno-20-9"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-20-10" name="__codelineno-20-10" href="#__codelineno-20-10"></a>
<a id="__codelineno-20-11" name="__codelineno-20-11" href="#__codelineno-20-11"></a><span class="w">  </span><span class="nx">connect</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-20-12" name="__codelineno-20-12" href="#__codelineno-20-12"></a><span class="w">    </span><span class="c1">// 보안상 쿼리 파라미터 대신 Sec-WebSocket-Protocol 헤더 사용</span>
<a id="__codelineno-20-13" name="__codelineno-20-13" href="#__codelineno-20-13"></a><span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">ws</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">WebSocket</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">url</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="sb">`authorization.bearer.</span><span class="si">${</span><span class="k">this</span><span class="p">.</span><span class="nx">token</span><span class="si">}</span><span class="sb">`</span><span class="p">]);</span>
<a id="__codelineno-20-14" name="__codelineno-20-14" href="#__codelineno-20-14"></a>
<a id="__codelineno-20-15" name="__codelineno-20-15" href="#__codelineno-20-15"></a><span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">ws</span><span class="p">.</span><span class="nx">onclose</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">event</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-20-16" name="__codelineno-20-16" href="#__codelineno-20-16"></a><span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">code</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="mf">4029</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-20-17" name="__codelineno-20-17" href="#__codelineno-20-17"></a><span class="w">        </span><span class="c1">// 연결 Rate Limit - 지수 백오프 재연결</span>
<a id="__codelineno-20-18" name="__codelineno-20-18" href="#__codelineno-20-18"></a><span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">delay</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Math</span><span class="p">.</span><span class="nx">min</span><span class="p">(</span><span class="mf">1000</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nb">Math</span><span class="p">.</span><span class="nx">pow</span><span class="p">(</span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">reconnectAttempts</span><span class="p">),</span><span class="w"> </span><span class="mf">60000</span><span class="p">);</span>
<a id="__codelineno-20-19" name="__codelineno-20-19" href="#__codelineno-20-19"></a><span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">warn</span><span class="p">(</span><span class="sb">`연결 Rate Limit. </span><span class="si">${</span><span class="nx">delay</span><span class="o">/</span><span class="mf">1000</span><span class="si">}</span><span class="sb">초 후 재연결...`</span><span class="p">);</span>
<a id="__codelineno-20-20" name="__codelineno-20-20" href="#__codelineno-20-20"></a><span class="w">        </span><span class="nx">setTimeout</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">connect</span><span class="p">(),</span><span class="w"> </span><span class="nx">delay</span><span class="p">);</span>
<a id="__codelineno-20-21" name="__codelineno-20-21" href="#__codelineno-20-21"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">reconnectAttempts</span><span class="o">++</span><span class="p">;</span>
<a id="__codelineno-20-22" name="__codelineno-20-22" href="#__codelineno-20-22"></a><span class="w">      </span><span class="p">}</span>
<a id="__codelineno-20-23" name="__codelineno-20-23" href="#__codelineno-20-23"></a><span class="w">    </span><span class="p">};</span>
<a id="__codelineno-20-24" name="__codelineno-20-24" href="#__codelineno-20-24"></a>
<a id="__codelineno-20-25" name="__codelineno-20-25" href="#__codelineno-20-25"></a><span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">event</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-20-26" name="__codelineno-20-26" href="#__codelineno-20-26"></a><span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">message</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<a id="__codelineno-20-27" name="__codelineno-20-27" href="#__codelineno-20-27"></a>
<a id="__codelineno-20-28" name="__codelineno-20-28" href="#__codelineno-20-28"></a><span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">message</span><span class="p">.</span><span class="nx">type</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;error&#39;</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nx">message</span><span class="p">.</span><span class="nx">payload</span><span class="p">.</span><span class="nx">code</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;RATE_LIMIT_EXCEEDED&#39;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-20-29" name="__codelineno-20-29" href="#__codelineno-20-29"></a><span class="w">        </span><span class="c1">// 메시지 Rate Limit - 일시적으로 전송 중지</span>
<a id="__codelineno-20-30" name="__codelineno-20-30" href="#__codelineno-20-30"></a><span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">warn</span><span class="p">(</span><span class="s1">&#39;메시지 Rate Limit:&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">message</span><span class="p">.</span><span class="nx">payload</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
<a id="__codelineno-20-31" name="__codelineno-20-31" href="#__codelineno-20-31"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">pauseMessageQueue</span><span class="p">();</span>
<a id="__codelineno-20-32" name="__codelineno-20-32" href="#__codelineno-20-32"></a><span class="w">      </span><span class="p">}</span>
<a id="__codelineno-20-33" name="__codelineno-20-33" href="#__codelineno-20-33"></a><span class="w">    </span><span class="p">};</span>
<a id="__codelineno-20-34" name="__codelineno-20-34" href="#__codelineno-20-34"></a>
<a id="__codelineno-20-35" name="__codelineno-20-35" href="#__codelineno-20-35"></a><span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-20-36" name="__codelineno-20-36" href="#__codelineno-20-36"></a><span class="w">      </span><span class="k">this</span><span class="p">.</span><span class="nx">reconnectAttempts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span><span class="w"> </span><span class="c1">// 성공 시 리셋</span>
<a id="__codelineno-20-37" name="__codelineno-20-37" href="#__codelineno-20-37"></a><span class="w">    </span><span class="p">};</span>
<a id="__codelineno-20-38" name="__codelineno-20-38" href="#__codelineno-20-38"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-20-39" name="__codelineno-20-39" href="#__codelineno-20-39"></a>
<a id="__codelineno-20-40" name="__codelineno-20-40" href="#__codelineno-20-40"></a><span class="w">  </span><span class="nx">pauseMessageQueue</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-20-41" name="__codelineno-20-41" href="#__codelineno-20-41"></a><span class="w">    </span><span class="c1">// 메시지 큐 일시 중지 로직</span>
<a id="__codelineno-20-42" name="__codelineno-20-42" href="#__codelineno-20-42"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-20-43" name="__codelineno-20-43" href="#__codelineno-20-43"></a><span class="p">}</span>
</code></pre></div>
<h3 id="_23">권장 클라이언트 동작<a class="headerlink" href="#_23" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>상황</th>
<th>권장 동작</th>
</tr>
</thead>
<tbody>
<tr>
<td>연결 Rate Limit (4029)</td>
<td>지수 백오프로 재연결 시도</td>
</tr>
<tr>
<td>메시지 Rate Limit</td>
<td>메시지 큐 일시 중지, 에러 메시지에서 retry_after 확인</td>
</tr>
<tr>
<td>정상 연결 끊김</td>
<td>즉시 재연결 시도</td>
</tr>
</tbody>
</table>
<h3 id="_24">비활성화<a class="headerlink" href="#_24" title="Permanent link">&para;</a></h3>
<p>개발/테스트 환경에서 WebSocket Rate Limit을 비활성화할 수 있습니다:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a><span class="nv">WS_RATE_LIMIT_ENABLED</span><span class="o">=</span><span class="nb">false</span>
</code></pre></div>
<blockquote>
<p><strong>주의</strong>: 프로덕션 환경에서는 반드시 활성화하세요!</p>
</blockquote>
<hr />
<h2 id="_25">관련 코드 참조<a class="headerlink" href="#_25" title="Permanent link">&para;</a></h2>
<table>
<thead>
<tr>
<th>파일</th>
<th>설명</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>app/ratelimit/config.py</code></td>
<td>규칙 정의 및 매칭 로직</td>
</tr>
<tr>
<td><code>app/ratelimit/middleware.py</code></td>
<td>REST API Rate Limit 미들웨어</td>
</tr>
<tr>
<td><code>app/ratelimit/limiter.py</code></td>
<td>요청 카운트 및 제한 로직</td>
</tr>
<tr>
<td><code>app/ratelimit/websocket.py</code></td>
<td>WebSocket Rate Limit 로직</td>
</tr>
<tr>
<td><code>app/ratelimit/cloudflare.py</code></td>
<td>Cloudflare/Trusted Proxy IP 관리 및 클라이언트 IP 추출</td>
</tr>
<tr>
<td><code>app/ratelimit/storage/memory.py</code></td>
<td>인메모리 저장소 (슬라이딩 윈도우)</td>
</tr>
<tr>
<td><code>app/websocket/router.py</code></td>
<td>WebSocket 엔드포인트 (Rate Limit 적용)</td>
</tr>
<tr>
<td><code>app/core/config.py</code></td>
<td>환경변수 설정</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="faq">FAQ<a class="headerlink" href="#faq" title="Permanent link">&para;</a></h2>
<h3 id="q-rate-limit">Q: Rate Limit을 테스트하고 싶어요<a class="headerlink" href="#q-rate-limit" title="Permanent link">&para;</a></h3>
<p>테스트 환경에서 빠르게 한도에 도달하도록 설정할 수 있습니다:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a><span class="c1"># 테스트용 설정</span>
<a id="__codelineno-22-2" name="__codelineno-22-2" href="#__codelineno-22-2"></a><span class="nv">RATE_LIMIT_DEFAULT_WINDOW</span><span class="o">=</span><span class="m">10</span>
<a id="__codelineno-22-3" name="__codelineno-22-3" href="#__codelineno-22-3"></a><span class="nv">RATE_LIMIT_DEFAULT_REQUESTS</span><span class="o">=</span><span class="m">5</span>
</code></pre></div>
<p>또는 비활성화 후 테스트:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a><span class="nv">RATE_LIMIT_ENABLED</span><span class="o">=</span><span class="nb">false</span>
</code></pre></div>
<h3 id="q-ip">Q: 특정 IP나 사용자를 화이트리스트에 추가하고 싶어요<a class="headerlink" href="#q-ip" title="Permanent link">&para;</a></h3>
<p>현재 버전에서는 화이트리스트 기능이 없습니다. 필요시 <code>RateLimitMiddleware</code>를 수정하세요:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a><span class="c1"># app/ratelimit/middleware.py</span>
<a id="__codelineno-24-2" name="__codelineno-24-2" href="#__codelineno-24-2"></a>
<a id="__codelineno-24-3" name="__codelineno-24-3" href="#__codelineno-24-3"></a><span class="n">WHITELIST_IPS</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;192.168.1.100&quot;</span><span class="p">,</span> <span class="s2">&quot;10.0.0.1&quot;</span><span class="p">}</span>
<a id="__codelineno-24-4" name="__codelineno-24-4" href="#__codelineno-24-4"></a>
<a id="__codelineno-24-5" name="__codelineno-24-5" href="#__codelineno-24-5"></a><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">dispatch</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">call_next</span><span class="p">):</span>
<a id="__codelineno-24-6" name="__codelineno-24-6" href="#__codelineno-24-6"></a>    <span class="c1"># 화이트리스트 IP는 스킵</span>
<a id="__codelineno-24-7" name="__codelineno-24-7" href="#__codelineno-24-7"></a>    <span class="n">client_ip</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">host</span> <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">client</span> <span class="k">else</span> <span class="kc">None</span>
<a id="__codelineno-24-8" name="__codelineno-24-8" href="#__codelineno-24-8"></a>    <span class="k">if</span> <span class="n">client_ip</span> <span class="ow">in</span> <span class="n">WHITELIST_IPS</span><span class="p">:</span>
<a id="__codelineno-24-9" name="__codelineno-24-9" href="#__codelineno-24-9"></a>        <span class="k">return</span> <span class="k">await</span> <span class="n">call_next</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
<a id="__codelineno-24-10" name="__codelineno-24-10" href="#__codelineno-24-10"></a>    <span class="c1"># ... 기존 로직 ...</span>
</code></pre></div>
<h3 id="q-redis">Q: Redis를 사용하고 싶어요<a class="headerlink" href="#q-redis" title="Permanent link">&para;</a></h3>
<p>현재는 인메모리 저장소만 지원합니다. Redis 지원이 필요하면 <code>app/ratelimit/storage/</code> 디렉토리에 새 저장소를 구현하세요:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a><span class="c1"># app/ratelimit/storage/redis.py</span>
<a id="__codelineno-25-2" name="__codelineno-25-2" href="#__codelineno-25-2"></a><span class="kn">from</span><span class="w"> </span><span class="nn">app.ratelimit.storage.base</span><span class="w"> </span><span class="kn">import</span> <span class="n">RateLimitStorage</span>
<a id="__codelineno-25-3" name="__codelineno-25-3" href="#__codelineno-25-3"></a>
<a id="__codelineno-25-4" name="__codelineno-25-4" href="#__codelineno-25-4"></a><span class="k">class</span><span class="w"> </span><span class="nc">RedisStorage</span><span class="p">(</span><span class="n">RateLimitStorage</span><span class="p">):</span>
<a id="__codelineno-25-5" name="__codelineno-25-5" href="#__codelineno-25-5"></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">record_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">window_seconds</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<a id="__codelineno-25-6" name="__codelineno-25-6" href="#__codelineno-25-6"></a>        <span class="c1"># Redis 구현</span>
<a id="__codelineno-25-7" name="__codelineno-25-7" href="#__codelineno-25-7"></a>        <span class="k">pass</span>
<a id="__codelineno-25-8" name="__codelineno-25-8" href="#__codelineno-25-8"></a>
<a id="__codelineno-25-9" name="__codelineno-25-9" href="#__codelineno-25-9"></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get_window_info</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">window_seconds</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">]:</span>
<a id="__codelineno-25-10" name="__codelineno-25-10" href="#__codelineno-25-10"></a>        <span class="c1"># Redis 구현</span>
<a id="__codelineno-25-11" name="__codelineno-25-11" href="#__codelineno-25-11"></a>        <span class="k">pass</span>
</code></pre></div>
<h3 id="q-graphql-rate-limit">Q: GraphQL 요청도 Rate Limit이 적용되나요?<a class="headerlink" href="#q-graphql-rate-limit" title="Permanent link">&para;</a></h3>
<p>네, <code>/v1/graphql</code> 엔드포인트에 60초당 60회 제한이 적용됩니다. 
GraphQL의 특성상 하나의 요청으로 여러 쿼리를 묶을 수 있으므로 효율적으로 사용하세요.</p>
<h3 id="q">Q: 분산 환경에서는 어떻게 되나요?<a class="headerlink" href="#q" title="Permanent link">&para;</a></h3>
<p>현재 인메모리 저장소는 단일 인스턴스용입니다. 분산 환경에서는:
1. Redis 저장소 구현 필요
2. 또는 로드밸런서에서 Rate Limit 처리 (nginx, Kong 등)</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../../..", "features": ["navigation.tabs", "navigation.sections", "navigation.expand", "navigation.top", "search.highlight", "content.code.copy"], "search": "../../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
    
  </body>
</html>